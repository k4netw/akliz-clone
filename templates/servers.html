{% extends "mainLayout.html" %}

{% block title %}Servers{% endblock %}

{% block page_header %}SERVERS{% endblock %}

{% block extra_styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='servers.css') }}">
{% endblock %}

{% block sidebar %}
<a href="/servers/new">Create a server</a>
<br><br>
<h3>Your Plan</h3>
<div class="plan-details">
    <div class="plan-item">
        <strong>Servers</strong>
        <p>Startable: {{ started_count }} of 2</p>
        <p>Total: {{ total_servers }} of 2</p>
    </div>
    <br>
    <div class="plan-item">
        <strong>Memory</strong>
        <p>Total: 2000MB</p>
        <p>Used: {{ used_memory }}MB</p>
        <p>Free: {{ free_memory }}MB</p>
    </div>
</div>
{% endblock %}

{% block content %}
<div class="servers-section">
    <h2>Started</h2>
    <div class="server-list">
        {% if started_servers %}
            {% for server in started_servers %}
                <div class="server-item">
                    <span><strong>Name:</strong> {{ server['name'] }}</span>
                    <span><strong>Address:</strong> localhost:{{ server['port'] }}</span>
                    <span><strong>Memory:</strong> {{ server['memory'] }} MB</span>
                    <a href="/servers/{{ server['id'] }}/console" class="manage-link">Manage</a>
                </div>
            {% endfor %}
        {% else %}
            <p>No servers are started.</p>
        {% endif %}
    </div>

    <h2>Stopped</h2>
    <div class="server-list">
        {% if stopped_servers %}
            {% for server in stopped_servers %}
                <div class="server-item">
                    <span><strong>Name:</strong> {{ server['name'] }}</span>
                    <span><strong>Memory:</strong> {{ server['memory'] }} MB</span>
                    <a href="{{ url_for('manage_server', server_id=server['id']) }}" class="manage-link">Manage</a>
                </div>
            {% endfor %}
        {% else %}
            <p>No servers are stopped.</p>
        {% endif %}
    </div>
</div>
{% endblock %}